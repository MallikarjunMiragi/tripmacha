<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Trip Macha - Signup</title>
  <link rel="stylesheet" href="style.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700&display=swap" rel="stylesheet">

</head>
<body>
            <img src="logo.png" alt="Trip Macha Logo" class="logo"/>
  <div class="main-container">
    <div class="card">
      <div class="left-section">

        <p class="tagline">You bring the<br> Gang,<br> Macha Brings<br> the Plan</p>
        <img src="guy_on_scooter.png" alt="Guy on Scooter" class="scooter"/>
      </div>
      <div class="right-section">
        <h1 class="title">Create Account</h1>
        <form class="form" id="signup-form">

          <div class="name-row">
            <input type="text" name="username" placeholder="User name" />
            <input type="text" name="full_name" placeholder="Full name" />
          </div>
          <div class="email-row">
          <input type="email" name="email" placeholder="Email" />
          
          </div>
           <div class="pass-row">
          
          <input type="password" name="password" placeholder="Password" />
          </div>
          <button type="submit">CREATE ACCOUNT</button>
          <p class="login">Already have an account? <a href="Signin.html">Login</a></p>
        </form>
      </div>
    </div>
  </div>
  <script>
    const form = document.getElementById('signup-form');
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const formData = new FormData(form);
      const payload = {
        username: formData.get('username'),
        full_name: formData.get('full_name'),
        email: formData.get('email'),
        password: formData.get('password')
      };

      try {
        const response = await fetch('https://new-tm.onrender.com/signup', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Accept': 'application/json'
          },
          body: JSON.stringify(payload)
        });

        const result = await response.json();
        if (response.ok) {
          window.location.href = "verifyemail.html";

        } else {
          alert('Signup failed: ' + (result.detail || 'Unknown error'));
        }
      } catch (error) {
        console.error('Network error:', error);
        alert('Network error: Could not reach server.');
      }
    });
  </script>
</body>
</html>
